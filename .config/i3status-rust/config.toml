[theme]
theme = "wpg_plain.toml"
# theme = "wpg_powerline.toml" # needs nerd font as $fontmono in wpgtk
# theme = "plain"

[icons]
icons = "awesome6"
# [icons.overrides]
# weather_sun = "\ufa98"

[[block]]
block = "focused_window"
[block.format]
full = "$title.rot-str(25)|"
short = "$title.rot-str(10)|"

[[block]]
block = "music"
#hide_when_empty = true
# interface_name_exclude = [".*kdeconnect.*", "mpd"]
[block.format]
full = "$combo.rot-str(20) $play $avail.eng(0)|"
short = "$combo.rot-str(15)$play$avail.eng(0)|"
[[block.click]]
button = "left"
# cmd = 'playerctl play-pause -i vlc -p "%any,$(playerctl -l | grep kdeconnect.mpris | tr \\n ,)"'
cmd = "next" # not working :(
# on_collapsed_click = "spotify"
[[block.click]]
button = "middle"
cmd = "killall spotify -s9"

# [[block]]
# block = "docker"
# format = "$running/$total"
# interval = 2

[[block]]
block = "cpu"
format_alt = "$utilization.bar()"
interval = 1
[[block.click]]
button = "right"
cmd = "~/.config/i3status-rust/toggle-app.py --class kitty --title 'htop-floating' --floating --exec 'kitty --title htop-floating -- htop'"

[[block]]
alert = 10.0 # %
block = "disk_space" 
format = "$icon $available.eng(3,B,T)" # TeraBytes with 3 digits
info_type = "available" 
interval = 20 
warning = 20.0 # %
[[block.click]]
button = "left"
cmd = "qdirstat"
[[block.click]]
button = "right"
update = true

[[block]]
block = "custom"
command = "~/.config/i3status-rust/psi.py io"
hide_when_empty = true
interval = 1
json = true
[[block.click]]
button = "left"
cmd = "~/.config/i3status-rust/toggle-app.py --class kitty --title 'htop-floating' --floating --exec 'kitty --title htop-floating -- htop'"

[[block]]
block = "memory"
format = "$icon $mem_used_percents"
format_alt = "$icon_swap $swap_used_percents"

[[block]]
block = "custom"
command = "~/.config/i3status-rust/psi.py memory"
hide_when_empty = true
interval = 1
json = true
[[block.click]]
button = "left"
cmd = "~/.config/i3status-rust/toggle-app.py --class kitty --title 'htop-floating' --floating --exec 'kitty --title htop-floating -- htop'"

# [[block]]
# block = "custom"
# command = "pacmd list-sinks | sed '/*index:/{N;s/.*\\n//;s/\\W*name:.*\\.\\(.*\\)>/\\1/;p};d;'"
# interval = "once"
# [[block.click]]
# button = "left"
# cmd = "pactl set-default-sink $(pactl list sinks short | grep RUNNING | head -n1 | cut -f2) && pacmd list-sinks | sed '/*index:/{N;s/.*\\n//;s/\\W*name:.*\\.\\(.*\\)>/\\1/;p};d;'"

[[block]]
block = "sound"
# set default device to current running sink, so the statusbar shows the volume of the current running sink
headphones_indicator = true
show_volume_when_muted = true
[[block.click]]
button = "left"
cmd = "~/.config/i3status-rust/toggle-app.py --class pavucontrol --floating"
# cmd = "pactlset-default-sink$(pactllistsinksshort|grepRUNNING|head-n1|cut-f2);~/.config/i3status-rust/toggle-app.py --class pavucontrol --floating"

[[block]]
block = "sound"
device_kind = "source"
format = ""
[[block.click]]
button = "left"
cmd = "~/.config/i3/mute-mics.zsh"
# cmd = "pactl set-source-mute 1 toggle"

# removed in 0.30.0
# [[block]]
# block = "networkmanager"
# device_format = "{icon}{ap}"

[[block]]
block = "net" 
format = "$icon {$signal_strength.bar(1)|}$speed_up.eng(3,B,K) $speed_down.eng(3,B,K)" # fixed length
format_alt = "$speed_up.eng(0,B,K) $speed_down.eng(0,B,K)" # dynamic length
[[block.click]]
button = "right"
cmd = "~/.config/i3status-rust/toggle-app.py --class org.gnome.Settings --exec gnome-control-center --network"

[[block]]
block = "backlight"

# [[block]]
# block = "hueshift"
# click_temp = 3500
# hue_shifter = "redshift"
# signal = 2
# step = 100

[[block]]
block = "battery"
device = "DisplayDevice"
driver = "upower"
# format = "{$percentage} {$power} {$time}"
# full_format = "{$percentage} {$power}"
# full_threshold = 99
# if_command = "test -e /sys/class/power_supply/BAT0"
full_format = ""
missing_format = ""

# [[block]]
# block = "keyboard_layout"
# driver = "setxkbmap"
# # #if_command = "command -v ibus && return 1 || return 0"
# interval = 1

# removed in 0.30.0
# [[block]]
# block = "ibus"
# if_command = "command -v ibus"
# on_click = "~/.config/i3status-rust/toggle-app.py --class ibus-setup --floating"
# [block.mappings]
# "anthy" = "jp"
# "pinyin" = "cn"
# "xkb:de::deu" = "de"
# "xkb:de:neo:deu" = "neo"
# "xkb:us::eng" = "en"

# [[block]]
# block = "keyboard_layout"
# driver = "sway"
# #format = "$layout-$variant"
# [block.mappings]
# "English (US)" = "US"
# "EurKEY (US)" = "eu"
# "German" = "DE"
# "German (US)" = "US-de"

# "German (no dead keys)" = "DEndk"

# [[block]]
# block = "custom"
# command = "qdbus org.fcitx.Fcitx5 /controller org.fcitx.Fcitx.Controller1.CurrentInputMethod | sed 's/keyboard-//;s/nodeadkeys/ndk/'"
# # hide_when_empty = true
# # json = false
# interval = 1
# [[block.click]]
# button = "left"
# cmd = "qdbus org.fcitx.Fcitx5 /controller org.fcitx.Fcitx.Controller1.SwitchInputMethodGroup deu"
# [[block.click]]
# button = "left"
# cmd = "qdbus org.fcitx.Fcitx5 /controller org.fcitx.Fcitx.Controller1.Toggle"

[[block]]
block = "bluetooth"
disconnected_format = ""
format = "{$icon |}$name{ $percentage|}|"
# mouse
mac = "DE:AD:FA:CE:CA:FE"
[[block.click]]
button = "left"
cmd = "~/.config/i3status-rust/toggle-app.py --class blueberry --floating"

[[block]]
block = "bluetooth"
disconnected_format = ""
format = "{$icon |}$percentage|"
# headset
mac = "DE:AD:FA:CE:CA:FE"
[[block.click]]
button = "left"
cmd = "~/.config/i3status-rust/toggle-app.py --class blueberry --floating"
[[block.click]]
button = "right"
cmd = "pw-cli s bluez_card.00_16_94_1C_FE_9F Profile '{ index: 4, save: true }' && sleep 1 && pw-cli s bluez_card.00_16_94_1C_FE_9F Profile '{ index: 8, save: true }'"

[[block]]
block = "kdeconnect"
# format = "$name $notif_icon $notif_count"
format = "$name{ $bat_icon $bat_charge|}{ $notif_icon|}"
[[block.click]]
button = "left"
cmd = "~/.config/i3status-rust/toggle-app.py --class org.kde.kdeconnect.app --exec kdeconnect-app --floating"

# needs dunst >= v1.6.0
[[block]]
block = "notify"
if_command = "dunstctl is-paused"

# like notify but for mako
# [[block]]
# block = "custom"
# cycle = [
#   "makoctl mode -r do-not-disturb -r urgent-only >/dev/null && echo '{\"icon\":\"bell\",\"state\":\"Info\"}'",
#   "makoctl mode -a do-not-disturb -r urgent-only >/dev/null && echo '{\"icon\":\"bell-slash\",\"state\":\"Info\"}'",
#   "makoctl mode -r do-not-disturb -a urgent-only >/dev/null && echo '{\"icon\":\"bell\",\"state\":\"Warning\",\"text\":\"U\"}'",
# ]
# hide_when_empty = false
# if_command = "makoctl list"
# interval = "once"
# json = true

# [[block]]
# # {location} {wind}m/s {direction} {wind_kmh}km/h {humidity}%"
# autolocate = true
# block = "weather"
# format = "{temp}"
# [[block.click]]
# button = "left"
# cmd = "firefox https://openweathermap.org/"
# service = {name = "openweathermap", api_key = "YOUR API KEY", units = "metric"}

[[block]]
block = "pomodoro"
# break_length = 5
# length = 25
break_message = "Back to work!"
message = "Take a break!"
notify_cmd = "notify-send"

[[block]]
block = "time"
format = "$icon %a %d-%m %H:%M:%S"
interval = 1
[[block.click]]
button = "left"
cmd = "~/.config/i3status-rust/toggle-app.py --class evolution --title '(K|C)alend(e|a)r.+Evolution' --floating --exec 'evolution -c calendar'"

[[block]]
block = "pacman"
format = "$icon $pacman.eng(0)+$aur.eng(0)"
format_singular = "$icon $pacman.eng(0)+$aur.eng(0)"
format_up_to_date = ""
if_command = "command -v yay && ping -c 1 -W 1 9.9.9.9"
interval = 3600
signal = 1
# If a linux update is availble, but no ZFS package, it won't be possible to
# actually perform a system upgrade, so we show a warning.
warning_updates_regex = "(linux |linux-lts|linux-zen)"
# If ZFS is available, we know that we can and should do an upgrade, so we show
# the status as critical.
aur_command = "yay -Qua"
critical_updates_regex = "(zfs |zfs-lts)"
error_format = "??"

# [[block]]
# block = "speedtest"
# bytes = false
# speed_digits = 1
# interval = 1800

[[block]]
block = "temperature"
#collapsed = true
format = "$icon|{$max|}"
format_alt = "$icon {$average$max|}"
# [[block]]
# block = "uptime"

# [[block]]
# block = "xrandr"
# interval = 5

# [[block]]
# block = "externalip"
# format = "{ip} {country_code}"
